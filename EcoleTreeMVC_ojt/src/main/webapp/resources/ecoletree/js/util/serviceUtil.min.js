if(!$){console.error("jQuery is null or jQuery's namespace is crashed. This Util need jQuery plugin.")}else if(!_){console.error("lodash util plugin is null or '_' overwrite other value. This Util need lodash plugin.")}else{"use strict";function ETService(a,b,c,d){var e;if(!(this instanceof ETService)){return new ETService(a,b,c,d)}e=this.__private._isString;if(e(a)){this.dataType=a}if(_.isBoolean(b)){this.async=b}if(_.isBoolean(c)||e(c)){this.contentType=c}if(e(d)){this.method=d}};ETService.constructor=ETService;ETService.prototype={constructor:ETService,method:"post",contentType:"application/json; charset=UTF-8",dataType:"text",async:true,successFunction:function(a){},errorFunction:function(a){console.error(a);location.href=getContextPath()+"/open404Error"},__private:(function(){var g=function(a,b){var c=_.isString(a);if(b!==true&&a===""){c=false}return c};var h=function(a,b,c){var d=_.isNil(a);if(!!b&&a===""){d=true}if(!!c&&typeof a==="object"&&_.isEmpty(a)){d=true}return d};var i=function(a){var b=/^(\/[a-zA-Z0-9_]+)+$/g;return g(a)&&(b.test(a)||a==="/")};var j=function(a,b){var c;if(h(b,true,true)){b={};b.error="NO_DATA";b.errorMessage="데이터가 없습니다"}else if(g(b,true)){c=b.charAt(0);if(c==="{"||c==="["){try{b=JSON.parse(b)}catch(e){console.error(e);b={};b.error="JSON_PARSE_ERROR";b.errorMessage=e.message}}}var d=false;if(g(b)&&(b.indexOf("404ERROR")>-1)){d=true;location.href=getContextPath()+"/open404Error"}else if(g(b)&&(b.indexOf("SESSIONERROR")>-1)){d=true;location.href=getContextPath()+"/sessionTimeout"}else if(g(b)&&(b.indexOf("500ERROR")>-1)){d=true;location.href=getContextPath()+"/open500Error"}if(!d){if(g(b)&&b.indexOf("<!DOCTYPE html")>-1){$("#content").html(b)}else if(b==="500"||b==="404"){k(b)}else if(b==="error"){a.errorFunction(b)}else if(_.isObject(b)&&(!!b.error||b.result==="error")){a.errorFunction(b)}else{a.successFunction(b)}}};var k=function(){var a=getContextPath();var b=window.location.href;if(-1<b.indexOf("/admin/")){a=getContextPath()+'/admin'}if($("head").children("#cssEcoletreeHome").length==0){$('head').append('<link id="cssEcoletreeHome" rel="stylesheet" href="'+getContextPath()+'/resources/ecoletree/css/ecoletree_home.css" type="text/css" />')}$("body").addClass("ecoleLanding ecoleMsgWrap");var c='<div class="container"><div class="ecoleHeader"><a class="logo" href="';c+=getContextPath()+'"><img src="';c+=getContextPath()+'/resources/ecoletree/img/kr/home/imgLogo.png" alt="CosmeticZone"></a></div></div>';$("header").empty().append(c);var d='<div id="wrapper">';d+='<div class="container ecoleMsgInHome"><div class="ecoleMsg"><div>';d+='<img src="'+getContextPath()+'/resources/ecoletree/img/kr/home/icon500.png" alt="500" />';d+='<h4 class="bxMBottom35"><strong>사용자가 많아 문제가 발생했습니다.</strong></h4>';d+='<p>사용자가 많아 페이지를 표시함에 문제가 발생했습니다.<br>F5를 눌러 페이지를 새로고침 하거나 메인페이지로 이동합니다.<br><br>지속적으로 이 메시지가 보인다면 관리자에게 문의 부탁드립니다.</p>';d+='<div><a href="'+a+'" class="btn btn-default">메인 페이지로</a></div>';d+='</div></div></div>';d+='</div>';$("#content").html(d)};var l=function(a,b,c,d){var e={};e.error="SYS_ERROR";e.status=b.status;e.errorMessage=d;e.errorDetail=b.responseText;a.errorFunction(e)};var m=function(a,b){if(g(b)&&b.toLowerCase().indexOf("json")>=0){if(h(a,false,false)){a={}}else if(!_.isObject(a)){a={data:a,}}a=JSON.stringify(a)}return a};var n=function(c,d,e){var f;if(!i(c)){return false}f=$("<form />").prop("method",d).prop("action",getContextPath()+c).hide().appendTo("body");if(_.isObject(e)){_.forEach(e,function(a,b){if(_.isObject(a)){a=JSON.stringify(a)}$("<input />").prop("name",b).prop("value",a).appendTo(f)})}f.submit().remove();return true};return{successHandler:j,errorHandler:l,_isString:g,_isNil:h,_isUrl:i,_convertData:m,_submitForm:n,}}()),setSuccessFunction:function(a){var b=this;b.successFunction=a;return b},setErrorFunction:function(a){var b=this;b.errorFunction=a;return b},callService:function(d,e,f){var g=this;var h=g.__private;var i;if(!h._isUrl(d)){return false}i=g.getDefaultOption();if(_.isObject(f)){$.extend(i,f)}if(!_.isFunction(i.success)){i.success=function(a){h.successHandler(g,a)}}if(!_.isFunction(i.error)){i.error=function(a,b,c){h.errorHandler(g,a,b,c);}}i.url=getContextPath()+d;if(!h._isNil(e,false,false)){i.data=h._convertData(e,i.contentType)}else{i.data=h._convertData(i.data,i.contentType)}$.ajax(i);return true},callView:function(a,b){var c=this;var d=c.__private;return d._submitForm(a,c.method,b)},getDefaultOption:function(){var a=this;var b={};b.method=a.method;b.contentType=a.contentType;b.dataType=a.dataType;b.async=a.async;return b},fileUpload:function(a,b){var c=this;var d,opt;if(!b.files&&!!b[0]){b=b[0]}if(!b.files||!b.files[0]){return false}d=new FormData();d.append("file_data",b.files[0]);opt={};opt.data=d;opt.contentType=false;opt.processData=false;return c.callService(a,null,opt)},fileUploadWithForm:function(c,d){var e=this;var f;var g,opt;if(!c||!d){return false}f=$(d);g=new FormData();f.find("input").each(function(a){var b=$(this);if(b.attr("type")=="file"){g.append(b.attr("name"),b[0].files[0])}else{g.append(b.attr("name"),b.val())}});opt={};opt.data=g;opt.contentType=false;opt.processData=false;return e.callService(c,null,opt)},fileDownload:function(a,b){var c=this;var d=c.__private;return d._submitForm(a,c.method,b)},}}